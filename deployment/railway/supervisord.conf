[supervisord]
nodaemon=true
user=tradingapp
logfile=/app/logs/supervisord.log
pidfile=/app/logs/supervisord.pid

[program:scheduler]
command=python main.py scheduler
directory=/app
user=tradingapp
autostart=true
autorestart=true
redirect_stderr=true
stdout_logfile=/app/logs/scheduler.log
stderr_logfile=/app/logs/scheduler_error.log

[program:dashboard]
command=python -c "
import os
from src.dashboard.run_dashboard import app
port = int(os.environ.get('PORT', 5000))
app.run(host='0.0.0.0', port=port, debug=False)
"
directory=/app
user=tradingapp
autostart=true
autorestart=true
redirect_stderr=true
stdout_logfile=/app/logs/dashboard.log
stderr_logfile=/app/logs/dashboard_error.log