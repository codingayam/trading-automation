[supervisord]
nodaemon=true
user=tradingapp
logfile=/app/logs/supervisord.log
pidfile=/app/logs/supervisord.pid

[program:scheduler]
command=python3 main.py start
directory=/app
user=tradingapp
autostart=true
autorestart=true
redirect_stderr=true
stdout_logfile=/app/logs/scheduler.log
startretries=999
startsecs=10

[program:dashboard]
command=bash -c 'export DASHBOARD_PORT=${PORT:-5000} && python3 src/dashboard/run_dashboard.py'
directory=/app
user=tradingapp
autostart=true
autorestart=true
redirect_stderr=true
stdout_logfile=/app/logs/dashboard.log